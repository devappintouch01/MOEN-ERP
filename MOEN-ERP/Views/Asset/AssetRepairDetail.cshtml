@section Title {
    <span class="fs-1 fw-semibold">แจ้งซ่อมครุภัณฑ์</span>

}
@section Breadcrumb {
    <li class="breadcrumb-item pe-3"><a href="#" class="pe-3">หน้าแรก</a></li>
    <li class="breadcrumb-item pe-3 text-muted">แจ้งซ่อมครุภัณฑ์</li>
}

<div class="card mt-10">
    <div class="card-body">
        <div class="row mb-3">

            <div class="col-md-4 mb-5">
                <label class="col-form-label">เลขที่แจ้งซ่อม</label>
                <input class="form-control form-control-sm" readonly value="" />
            </div>
            <div class="col-md-4 mb-5">
                <label class="col-form-label">วันที่แจ้งซ่อม <span class="text-danger">*</span></label>
                <div class="position-relative">
                    <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" value="26/07/2567" name="EffectiveRepairDate" id="EffectiveRepairDate" />
                    <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                        <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-5">
                <label class="col-form-label">สถานะ</label>
                <input class="form-control form-control-sm" readonly value="" />
            </div>


            <br />
            <hr />

            <div class="col-md-12 mb-3">
@* 
                <div class="row mb-5">
                    <label class="fw-bold fs-4">รายการครุภัณฑ์</label>
                </div> *@

                <div class="col-lg-12 col-md-12 col-sm-12 text-end mt-5">
                    <button id="btnAdd" class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#mdlDetail">
                        <i class="fa fa-plus"></i> เพิ่มรายการ
                    </button>
                    <button class="btn btn-danger btn-sm text-end"><i class="fa fa-trash"></i> ลบรายการ</button>
                </div>

                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
                        <div class="row mt-5">
                            <div class="col-md-12 mb-3">
                                <table id="tbl1" class="table table-row-dashed table-hover table-row-gray-300 align-middle gy-5 gs-7 tblAsset">
                                    <thead class="table-primary">
                                        <tr class="fw-semibold fs-6 text-gray-80 fw-bold">
                                            <th class="text-center" width="70">
                                                <input type="checkbox" value="" id="chk1">
                                            </th>
                                            <th class="text-center" style="width:5%"></th>
                                            <th class="text-center">ลำดับ</th>
                                            <th class="text-center">เลขครุภัณฑ์</th>
                                            <th class="text-center">เลขสินทรัพย์</th>
                                            <th class="text-center">รายการ</th>                                            
                                            <th class="text-center">ลักษณะการชำรุด</th>
                                            <th class="text-center">ตรวจสอบแล้ว</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-center">
                                                <input type="checkbox" value="" id="chk2">
                                            </td>
                                            <td class="text-center">
                                                <a data-bs-toggle="modal" data-bs-target="#mdlDetail" class="btn btn-icon btn-sm btn-light-warning text-gray-800 text-hover-white fw-bold mb-0"
                                                   data-bs-toggle="tooltip" data-bs-custom-class="tooltip-inverse" title="แก้ไขรายละเอียด">
                                                    <i class="fa fa-edit fs-4"></i>
                                                </a>
                                            </td>
                                            <td class="text-center">1</td>
                                            <td class="text-center">01/0156</td>
                                            <td class="text-center"></td>
                                            <td class="text-center">เครื่องขยายเสียง</td>
                                            <td class="text-center">
                                                <input type="text" value="" id="txt1">
                                            </td>
                                            <td class="text-center">
                                                <input type="checkbox" value="" id="chk3">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <br />
                <hr />

            </div>

                      

            <div class="col-md-4 mb-3">
                <label class="col-form-label">วันที่รับแจ้ง</label>
                <div class="position-relative">
                    <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" readonly  />
                    <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                        <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label class="col-form-label">วันที่ส่งคืน</label>
                <div class="position-relative">
                    <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" readonly />
                    <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                        <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label class="col-form-label">วันที่รับคืน</label>
                <div class="position-relative">
                    <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" readonly />
                    <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                        <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                </div>
            </div>            

            <br />
            <hr />

            <div class="col-md-3 mb-3">
                <label class="col-form-label">ไฟล์แนบ</label>
                <input class="form-control form-select-sm" type="file" />
            </div>
        </div>

        <div class="mt-10 row">
            <div class="col-8">
                <button class="btn btn-primary btn-sm"><i class="fa fa-save"></i> บันทึก</button>
                <button class="btn btn-warning btn-sm"><i class="fa fa-paper-plane"></i> ส่งเรื่อง</button>
                <button class="btn btn-danger btn-sm text-end"><i class="fa fa-trash"></i> ลบ</button>
                <a href="@Url.Action("AssetReturnList","Asset")" class="btn btn-secondary btn-sm"><i class="fa fa-refresh"></i> กลับหน้าหลัก</a>
                <button class="btn btn-info btn-sm"><i class="fa fa-print"></i> พิมพ์</button>
            </div>
            <div class="col-4 text-end">
                <button id="btHistory" class="btn btn-primary btn-sm " data-bs-toggle="modal" data-bs-target="#mdlHistoryDetail">
                    <i class="fa fa-history"></i> ประวัติการพิจารณา
                </button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" id="mdlDetail">
    <div class="modal-dialog modal-lg">

        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <label>ครุภัณฑ์แจ้งซ่อม</label>
                </h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>                 
            </div>
            
            <div class="modal-body">

                <div class="row mb-3">
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">เลขครุภัณฑ์ที่ <span class="text-danger">*</span></label>
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control">
                            <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#mdlSearchAsset"><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">เลขสินทรัพย์</label>
                        <input class="form-control form-control-sm" readonly value="" />
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">รายการ </label>
                        <textarea class="form-control form-control-sm" readonly rows="2" name=""></textarea>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">ลักษณะการชำรุด <span class="text-danger">*</span></label>
                        <textarea class="form-control form-control-sm" rows="2" name=""></textarea>
                    </div>
                </div>
                <br />
                <hr />
                <div class="row mb-3">
                    <div class="col-md-6 mb-3">
                        <div class="form-check mt-3 ms-3">
                            <input class="form-check-input" type="checkbox" value="" name="" id="">
                            <label class="form-check-label ms-2" for="">
                                ตรวจสอบแล้ว
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">บันทึกจากเจ้าหน้าที่ ศทส. </label>
                        <textarea class="form-control form-control-sm" rows="2" name=""></textarea>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-check-label ms-2" for=""> สภาพ <span class="text-danger">*</span></label>
                        <div class="row fv-row mb-3 mt-2">
                            <div class="d-xxl-flex d-xl-flex d-lg-flex d-md-flex d-sm-flex">
                                <div class="form-check  form-check-custom form-check-solid me-xxl-10 me-xl-10 me-lg-10 me-md-10 me-sm-10 mb-2">
                                    <input class="form-check-input" type="radio" value="S" id="BorrowerTypeS" name="assetBorrow.BorrowerType" checked="checked">
                                    <label class="form-check-label" for="BorrowerTypeS">
                                        ตนเอง
                                    </label>
                                </div>
                                <div class="form-check form-check-custom form-check-solid me-xxl-10 me-xl-10 me-lg-10 me-md-10 me-sm-10 mb-2">
                                    <input class="form-check-input" type="radio" value="O" id="BorrowerTypeO" name="assetBorrow.BorrowerType" checked="">
                                    <label class="form-check-label" for="BorrowerTypeO">
                                        ผู้อื่น
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">ลักษณะชำรุด <span class="text-danger">*</span></label>
                        <textarea class="form-control form-control-sm" rows="2" name=""></textarea>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">บริษัท/ห้างร้าน </label>
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control">
                            <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#mdlSearchAsset"><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">จำนวนเงิน</label>
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control">
                            <span class="input-group-text">บาท</span>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">วันที่ตรวจสอบ </label>
                        <div class="position-relative">
                            <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" value=""  />
                            <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                                <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">วันที่ลงบัญชี </label>
                        <div class="position-relative">
                            <input type="text" class="form-control form-control-sm datepickerinput" placeholder="วว/ดด/ปปปป" value="" />
                            <div class="position-absolute translate-middle-y top-50 end-0 me-3">
                                <i class="fas fa-calendar fs-1hx"><span class="path1"></span><span class="path2"></span></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <br />
                <hr />
                <div class="row mb-3">
                    <div class="col-md-12 mb-12 text-end">
                        <button type="button" class="btn btn-success btn-sm" id="btnMdlTab1" data-bs-toggle="modal" data-bs-target="#mdlDetail"><i class="fa fa-plus"></i> เพิ่มรายการ</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="removeTableTab1()"><i class="fa fa-trash"></i> ลบรายการ</button>
                       
                    </div>
                    
                </div>


            </div>


            <div class="modal-footer justify-content-end gap-5">
                <button type="button" class="btn btn-sm btn-primary"><i class="fa fa-check"></i> ตกลง</button>
                <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal"><i class="fa  fa-ban"></i>  ปิด</button>
            </div>

        </div>

    </div>
</div>

<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" id="mdlHistoryDetail">
    <div class="modal-dialog modal-lg">

        <div class="modal-content">
            <div class="modal-header">
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>

            <div class="modal-body">

                <div class="row mb-3">

                    <div class="tab-content" id="myTabHistory">
                        <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
                            <div class="row mt-5">
                                <div class="col-md-12 mb-3">
                                    <table id="tbl1" class="table table-row-dashed table-hover table-row-gray-300 align-middle gy-5 gs-7 tblAsset">
                                        <thead class="table-primary">
                                            <tr class="fw-semibold fs-6 text-gray-80 fw-bold">

                                                <th class="text-center" style="width:5%">#</th>
                                                <th class="text-center">วันที่</th>
                                                <th class="text-center">ผู้ดำเนินการ</th>
                                                <th class="text-center">ผู้ดำเนินการลำดับถัดไป</th>
                                                <th class="text-center">การดำเนินการ</th>
                                                <th class="text-center">ความคิดเห็น</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="text-center">1</td>
                                                <td class="text-center">09/08/2567</td>
                                                <td class="text-center">เจ้าหน้าที่ทดสอบ1</td>
                                                <td class="text-center">เจ้าหน้าที่พัสดุ1</td>
                                                <td class="text-center">ส่งเรื่องพิจารณา</td>
                                                <td class="text-center">เรียบร้อยสมบูรณ์ดี</td>
                                            </tr>
                                            <tr>
                                                <td class="text-center">2</td>
                                                <td class="text-center">10/08/2567</td>
                                                <td class="text-center">เจ้าหน้าที่พัสดุ1</td>
                                                <td class="text-center">เจ้าหน้าที่ทดสอบ1</td>
                                                <td class="text-center">ส่งกลับแก้ไข</td>
                                                <td class="text-center"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>


        </div>

    </div>
</div>

<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" id="mdlSearchAsset">
    <div class="modal-dialog modal-lg">

        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <label>ครุภัณฑ์</label>
                </h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>

            <div class="modal-body">
                <div class="row mb-3">
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">เลขครุภัณฑ์</label>
                        <input class="form-control form-control-sm" />
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="col-form-label">เลขสินทรัพย์</label>
                        <input class="form-control form-control-sm" />
                    </div>
                </div>

                <div class="card-footer text-center">
                    <button type="submit" id="btnSearch" class="btn btn-primary btn-sm"><i class="fa fa-search"></i> ค้นหา</button>
                    <button id="btnResetSearch" type="reset" class="btn btn-secondary btn-sm"><i class="fa fa-refresh"></i> ล้างเงื่อนไข</button>
                </div>

                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
                        <div class="row mt-5">
                            <div class="col-md-12 mb-3">
                                <table id="tbl1" class="table table-row-dashed table-hover table-row-gray-300 align-middle gy-5 gs-7 tblAsset">
                                    <thead class="table-primary">
                                        <tr class="fw-semibold fs-6 text-gray-80 fw-bold">
                                            <th class="text-center" width="70">
                                                <input type="checkbox" value="" id="chk1">
                                            </th>
                                            <th class="text-center" style="width:5%">#</th>
                                            <th class="text-center">เลขครุภัณฑ์</th>
                                            <th class="text-center">เลขสินทรัพย์</th>
                                            <th class="text-center">รายการ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-center">
                                                <input type="checkbox" value="" id="chk2">
                                            </td>
                                            <td class="text-center">1</td>
                                            <td class="text-center">001</td>
                                            <td class="text-center">001</td>
                                            <td class="text-center">ลำโพง</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer justify-content-end gap-5">
                <button type="button" class="btn btn-sm btn-primary"><i class="fa fa-save"></i> บันทึก</button>
                <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal"><i class="fa  fa-ban"></i>  ปิด</button>
            </div>

        </div>

    </div>
</div>


@section Scripts {
    <script>
        SetInputDate('EffectiveRepairDate');

        $('.tblAsset').DataTable({
            language: {
                url: `${baseURL}/js/th.json`,
            },
            "paging": true,
            "searching": false,
            "lengthChange": true,
            "ordering": false,
            "info": true,
            "autoWidth": false,
            "responsive": true,
            responsive: {
                details: {
                    display: $.fn.dataTable.Responsive.display.childRowImmediate,
                    type: 'none',
                    target: ''
                }
            },
            "pageLength": 10,
            deferLoading: 10,
            dom: '<"float-left"f>rt<"row"<"col-sm-4"i><"col-sm-4 text-center"l><"col-sm-4"p>>'
        });
    </script>
}
